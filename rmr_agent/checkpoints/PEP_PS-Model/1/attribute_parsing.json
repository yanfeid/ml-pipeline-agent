{
  "attribute_parsing": [
    {
      "error": "Failed to parse JSON: Invalid \\escape: line 10 column 110 (char 596)"
    },
    {
      "Data Preprocessing": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/02-modeling_pep.py",
        "line_range": "Lines 1-191",
        "inputs": [
          "dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'",
          "filter_discipline_id: 1002",
          "filter_time_created: '2022-02-15 23:59:59'",
          "meta_columns: ['tid', 'entity_reference_id', 'time_created', 'new_logic_label', 'new_logic_label_v2', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_uid', 'label_with_autorfi', 'pit_context', 'txn_grph_linked_account_list']",
          "tag_column: 'new_logic_label'",
          "categorical_columns: ['case_identifier', 's_nm', 's_first_nm', 's_middle_nm', 's_last_nm', 's_bus_nm', 's_trade_nm', 'dt', 'scenario_name', 'seg_reason', 's_cntry', 'customer_dob_available']",
          "numerical_columns: ['length_s_trade_nm', 's_gibscore_name', 's_cust_name_profanity', 's_busn_name_profanity', 's_trade_name_profanity']",
          "high_missing_threshold: 98",
          "dev_time_split: '2022-05-31 23:59:59'",
          "oot_time_split: '2022-06-01 00:00:00'",
          "star_data_path: './PEP_PS/STAR/pepps_PEP_V10.1.csv'",
          "star_meta_columns: ['tid', 'pit_context', 'entity_reference_id', 'entity_id', 'alert_cust_id', 'discipline_id', 'customer_id']",
          "psi_threshold: 0.1",
          "dob_variables: ['itself_dob_available_sum', 'linked_dob_available_sum', 'dob_match_sum', 'linked_dob_match_sum', 'year_match_sum', 'linked_year_match_sum', 'itself_dob_diff_min', 'itself_dob_diff_max', 'itself_dob_diff_mean', 'linked_dob_diff_min', 'linked_dob_diff_max', 'linked_dob_diff_mean', 'itself_year_diff_min', 'itself_year_diff_max', 'itself_year_diff_mean', 'linked_year_diff_min', 'linked_year_diff_max', 'linked_year_diff_mean']",
          "impute_categorical: 'unknown'",
          "impute_numerical: -999"
        ],
        "outputs": [
          "cleaned_data_path: './PEP_PS/model_w25/col_names_25.5_pep.pk'",
          "encoding_dict_path: './PEP_PS/model_w25/enc_dic_splitcase_25.5_pep.pk'",
          "numerical_mean_std_path: './PEP_PS/model_w25/num_mean_std_splitcase_25.5_pep.pk'",
          "categorical_embedding_sizes_path: './PEP_PS/model_w25/categorical_embedding_sizes_splitcase_25.5_pep.pk'",
          "train_test_split_path: './PEP_PS/model_w25/dev_splitcase_25.5_pep.pk'"
        ]
      },
      "Model Training": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/02-modeling_pep.py",
        "line_range": "Lines 189-365",
        "inputs": [
          "learning_rate: 1e-4 to 1e-2 (loguniform)",
          "weight_decay: 1e-5 to 1e-2 (loguniform)",
          "dropout: 0.1 to 0.5 (float)",
          "num_units: 40 to 120 (int)",
          "batch_size: 50 to 500 (int)",
          "num_layers: 2 to 4 (int)",
          "epochs: 100",
          "model_save_path: './PEP_PS/model_w25/hptuning/'",
          "model_tag: '25.5_pepht'",
          "train_data: train_ds_buddle",
          "validation_data: test_ds_buddle",
          "early_stop_tolerance: 20"
        ],
        "outputs": [
          "best_model_path: './PEP_PS/model_w25/hptuning/{}_{}.bin'.format(model_tag, current_time)",
          "study_log_path: '/home/chaoychen/PEP_PS/model_w25/hptuning/study_log.txt'",
          "study_save_path: '/home/chaoychen/PEP_PS/model_w25/hptuning/{}.pk'.format(studyname)"
        ]
      }
    },
    {
      "Data Preprocessing": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/03-modeling_ps.py",
        "line_range": "1-201",
        "inputs": [
          "dataset_path: './PEP_PS/dataset/clean_all_var_v10.pk'",
          "filter_discipline_id: 1001",
          "filter_time_created: '2021-07-31 23:59:59'",
          "auto_rfi_label: 'Auto-RFI'",
          "ds_final_state_path: '/apps/risk/qpull/out/chaoychen_1660156696_tdmovetpt_fexp.csv'",
          "ds_final_state_sep: '\\x07'",
          "ds_final_state_filter_label: 'RFI'",
          "ds_final_state_filter_final_step: 'Man-Dis'",
          "meta_columns: ['tid', 'entity_reference_id', 'time_created', 'new_logic_label', 'new_logic_label_v2', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_uid', 'label_with_autorfi', 'pit_context', 'txn_grph_linked_account_list']",
          "tag_column: 'new_logic_label'",
          "rev_cat_columns: ['case_identifier', 's_nm', 's_first_nm', 's_middle_nm', 's_last_nm', 's_bus_nm', 's_trade_nm', 'dt', 'scenario_name', 'seg_reason', 's_cntry', 'customer_dob_available']",
          "cat_2_num_columns: ['length_s_trade_nm', 's_gibscore_name', 's_cust_name_profanity', 's_busn_name_profanity', 's_trade_name_profanity']",
          "high_missing_threshold: 98",
          "dev_time_split: '2022-03-31 23:59:59'",
          "oot_time_split: '2022-04-01 00:00:00'",
          "star_dataset_path: './PEP_PS/STAR/pepps_PS_V9.csv'",
          "star_dataset_sep: ','",
          "star_psi_threshold: 0.1",
          "dob_var_columns: ['itself_dob_available_sum', 'linked_dob_available_sum', 'dob_match_sum', 'linked_dob_match_sum', 'year_match_sum', 'linked_year_match_sum', 'itself_dob_diff_min', 'itself_dob_diff_max', 'itself_dob_diff_mean', 'linked_dob_diff_min', 'linked_dob_diff_max', 'linked_dob_diff_mean', 'itself_year_diff_min', 'itself_year_diff_max', 'itself_year_diff_mean', 'linked_year_diff_min', 'linked_year_diff_max', 'linked_year_diff_mean']",
          "impute_cat_value: 'unknown'",
          "impute_num_value: -999",
          "train_test_split_ratio: 0.2",
          "train_test_split_random_state: 42"
        ],
        "outputs": [
          "cleaned_dataset_path: './PEP_PS/model_w26/col_names_26.2_ps.pk'",
          "encoding_dict_path: './PEP_PS/model_w26/enc_dic_splitcase_26.2_ps.pk'",
          "num_mean_std_path: './PEP_PS/model_w26/num_mean_std_splitcase_26.2_ps.pk'",
          "categorical_embedding_sizes_path: './PEP_PS/model_w26/categorical_embedding_sizes_splitcase_26.2_ps.pk'",
          "train_test_split_indices_path: './PEP_PS/model_w26/dev_splitcase_26.2_ps.pk'"
        ]
      },
      "Model Training": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/03-modeling_ps.py",
        "line_range": "202-341",
        "inputs": [
          "learning_rate: 0.005",
          "weight_decay: 0.0002017676740751972",
          "dropout: 0.139544111255766",
          "num_units: 120",
          "batch_size: 191",
          "num_layers: 2",
          "epochs: 100",
          "model_save_path: './PEP_PS/model_w26/best_after_tuning/'",
          "model_tag: '26.2_ps'"
        ],
        "outputs": [
          "best_model_path: './PEP_PS/model_w26/best_after_tuning/{}_{}.bin'"
        ]
      }
    },
    {
      "Model Evaluation": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/04-model_evaluation.py",
        "line_range": "1-1572",
        "inputs": [
          "features: [cat_col, num_col]",
          "cat_encoding: enc_dic",
          "num_norm: [dev_mean, dev_std]",
          "categorical_embedding_sizes: categorical_embedding_sizes",
          "model_path: './PEP_PS/model_{}/best_after_tuning/{}_20220811_13_40.bin'",
          "nu: 50",
          "train_ds: train_ds",
          "val_ds: test_ds",
          "oot_ds: oot_ds"
        ],
        "outputs": [
          "dataset_processed: dataset_processed",
          "confusion_dict: confusion_dict",
          "case_eval_ds2: case_eval_ds2",
          "case_eval_ds_agg: case_eval_ds_agg"
        ]
      }
    },
    {
      "Data Preprocessing": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/05-lgbm_feature_importance_PEP.py",
        "line_range": "1-44",
        "inputs": [
          "dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'",
          "filter_condition: \"(all_dataset['discipline_id']==1002) & (all_dataset['time_created']>'2022-02-15 23:59:59')\"",
          "column_names_path: \"./PEP_PS/model_w25/col_names_25.5_pep.pk\"",
          "meta_columns: ['tid', 'discipline_id', 'entity_reference_id', 'time_created', 'new_logic_label', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_type', 'entity_uid', 'pit_context']",
          "tag_column: 'new_logic_label'",
          "tag_mt: ['tag_esc', 'tag_rfi', 'tag_em']",
          "split_date: '2022-05-31 23:59:59'"
        ],
        "outputs": [
          "dev_dataset_path: './PEP_PS/model_w27/dev_ds_lgbm.pk'",
          "oot_dataset_path: './PEP_PS/model_w27/oot_ds_lgbm.pk'"
        ]
      },
      "Model Training": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/05-lgbm_feature_importance_PEP.py",
        "line_range": "45-96",
        "inputs": [
          "case_auto_rfi_path: '/home/chaoychen/shared_data/data/keyuchen/pep_ps_scm_hits_driver_v2.pkl'",
          "test_size: 0.2",
          "random_state: 42",
          "lgbm_params: task: 'train', boosting_type: 'gbdt', objective: 'binary', metric: 'auc', is_unbalance: True, learning_rate: 0.005, feature_fraction: 0.8, bagging_fraction: 0.8, bagging_freq: -1, verbose: 50, max_depth: 6, num_leaves: 22, max_bin: 18, min_sum_hessian_in_leaf: 240.89066194627077, num_threads: 10, n_estimators: 400",
          "discipline_ids: ['1002']"
        ],
        "outputs": [
          "model_save_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'"
        ]
      },
      "Model Evaluation": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/05-lgbm_feature_importance_PEP.py",
        "line_range": "97-136",
        "inputs": [
          "discipline_ids: ['1001', '1002']",
          "tag_mt: ['tag_esc', 'tag_rfi', 'tag_em']",
          "model_load_path: '/home/chaoychen/PEP_PS/model_w20/lgbm_{disp}_{_tag}.pk'"
        ],
        "outputs": [
          "feature_importance_path: './PEP_PS/Feature_imp/pepps_model_imp_v9.1.xlsx'"
        ]
      }
    },
    {
      "Data Preprocessing": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/06-lgbm_feature_importance_PS.py",
        "line_range": "14-55",
        "inputs": [
          "dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'",
          "filter_condition: \"(all_dataset['discipline_id']==1001) & (all_dataset['time_created']>'2021-08-01 00:00:00')\"",
          "column_names_path: './PEP_PS/model_w26/col_names_26.2_ps.pk'",
          "meta_columns: ['tid', 'discipline_id', 'entity_reference_id', 'time_created', 'new_logic_label', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_type', 'entity_uid', 'pit_context']",
          "target_column: 'new_logic_label'",
          "additional_tags: ['tag_esc', 'tag_rfi', 'tag_em']",
          "date_split_condition: '2022-03-31 23:59:59'",
          "case_auto_rfi_path: '/home/chaoychen/shared_data/data/keyuchen/pep_ps_scm_hits_driver_v2.pkl'",
          "test_size: 0.2",
          "random_state: 42"
        ],
        "outputs": [
          "train_data_path: 'raw_train'",
          "test_data_path: 'raw_test'"
        ]
      },
      "Model Training": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/06-lgbm_feature_importance_PS.py",
        "line_range": "56-93",
        "inputs": [
          "model_params: {'task': 'train', 'boosting_type': 'gbdt', 'objective': 'binary', 'metric': 'auc', 'is_unbalance': True, 'learning_rate': 0.005, 'feature_fraction': 0.8, 'bagging_fraction': 0.8, 'bagging_freq': -1, 'verbose': 50, 'max_depth': 6, 'num_leaves': 22, 'max_bin': 18, 'min_sum_hessian_in_leaf': 240.89066194627077, 'num_threads': 10, 'n_estimators': 400}",
          "discipline_ids: ['1001']",
          "tags: ['tag_esc', 'tag_rfi', 'tag_em']",
          "train_data: 'sample_raw_train'",
          "test_data: 'sample_raw_test'",
          "categorical_features: 'cat_col'",
          "numerical_features: 'num_col'"
        ],
        "outputs": [
          "model_save_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'"
        ]
      },
      "Model Evaluation": {
        "file_name": "rmr_agent/repos/PEP_PS-Model/modeling_script/06-lgbm_feature_importance_PS.py",
        "line_range": "97-133",
        "inputs": [
          "model_load_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'",
          "discipline_ids: ['1001', '1002']",
          "tags: ['tag_esc', 'tag_rfi', 'tag_em']"
        ],
        "outputs": [
          "feature_importance_save_path: './PEP_PS/Feature_imp/pepps_model_imp_v10.1.xlsx'"
        ]
      }
    }
  ]
}