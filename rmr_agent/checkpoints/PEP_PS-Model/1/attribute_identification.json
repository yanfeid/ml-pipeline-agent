{
  "attribute_identification": [
    "```yaml\nDriver Creation:\n    Inputs:\n        - hdfs_host_stampy: 'stampy'\n        - hdfs_host_horton: 'horton'\n        - read_dict:\n            driver: ['gn', '/home/chaoychen/shared_data/data/keyuchen/pep_ps_scm_hits_driver_v2.pkl', '']\n            bert: ['gn', '/home/chaoychen/shared_data/data/keyuchen/final_bert_score_v2.csv', ',']\n            context: ['horton', '/apps/risk/qpull/out/chaoychen_1659461390_tdmovetpt_fexp.csv', '\\x07']\n            attack: ['horton', '/apps/risk/qpull/out/chaoychen_1659461423_tdmovetpt_fexp.csv', '\\x07']\n            gib: ['horton', '/user/chaoychen/tmp_load/pep_ps_scm_gib_after_function2_v2.csv', '\\x07']\n            lokale: ['horton', '/user/chaoychen/pep_ps/all_var_v6/driver_alert_lokale_fea_v2.csv', '\\x07']\n            graph: ['stampy', '/user/chaoychen/pep_ps/all_var_v6/pep_ps_scm_cases_tag_driver_v2_graph_vars_txn.csv', '\\x07']\n            match: ['horton', '/user/chaoychen/pep_ps/all_var_v6/driver_match_can_eav_lokale_agg_fea_v2.csv', '\\x07']\n            dobmatch: ['gn', '/home/chaoychen/shared_data/data/keyuchen/scm_vars/df_dob_vars_final_v2_new.pkl', '']\n            basicmatch: ['gn', '/home/chaoychen/shared_data/data/keyuchen/similarity_scores/df_basic_match_v2_new.pkl', '']\n            meta: ['horton', '/apps/risk/qpull/out/chaoychen_1659461961_tdmovetpt_fexp.csv', '\\x07']\n            latin: ['horton', '/apps/risk/qpull/out/chaoychen_1659462393_tdmovetpt_fexp.csv', '\\x07']\n            if_primary: ['horton', '/apps/risk/qpull/out/chaoychen_1660842135_tdmovetpt_fexp.csv', '\\x07']\n            bert_sim: ['gn', '/home/chaoychen/shared_data/data/keyuchen/similarity_scores/df_location_full_bert_scores_agg_v2.pkl', '']\n            geo_sim: ['gn', '/home/chaoychen/shared_data/data/keyuchen/similarity_scores/df_location_geo_fuzz_v2_new.pkl', '']\n            fuzz_sim: ['gn', '/home/chaoychen/shared_data/data/keyuchen/similarity_scores/df_location_fuzz_v2_new.pkl', '']\n            hits_per_case: ['horton', '/apps/risk/qpull/out/chaoychen_1659462422_tdmovetpt_fexp.csv', '\\x07']\n    Outputs:\n        - final_dataset_path: './PEP_PS/dataset/clean_all_var_v10.pk'\n        - star_audit_path: './PEP_PS/STAR/'\n```",
    "```yaml\nData Preprocessing:\n    Inputs:\n        - dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'\n        - filter_discipline_id: 1002\n        - filter_time_created: '2022-02-15 23:59:59'\n        - meta_columns: ['tid', 'entity_reference_id', 'time_created', 'new_logic_label', 'new_logic_label_v2', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_uid', 'label_with_autorfi', 'pit_context', 'txn_grph_linked_account_list']\n        - tag_column: 'new_logic_label'\n        - categorical_columns: ['case_identifier', 's_nm', 's_first_nm', 's_middle_nm', 's_last_nm', 's_bus_nm', 's_trade_nm', 'dt', 'scenario_name', 'seg_reason', 's_cntry', 'customer_dob_available']\n        - numerical_columns: ['length_s_trade_nm', 's_gibscore_name', 's_cust_name_profanity', 's_busn_name_profanity', 's_trade_name_profanity']\n        - high_missing_threshold: 98\n        - dev_time_split: '2022-05-31 23:59:59'\n        - oot_time_split: '2022-06-01 00:00:00'\n        - star_data_path: './PEP_PS/STAR/pepps_PEP_V10.1.csv'\n        - star_meta_columns: ['tid', 'pit_context', 'entity_reference_id', 'entity_id', 'alert_cust_id', 'discipline_id', 'customer_id']\n        - psi_threshold: 0.1\n        - dob_variables: ['itself_dob_available_sum', 'linked_dob_available_sum', 'dob_match_sum', 'linked_dob_match_sum', 'year_match_sum', 'linked_year_match_sum', 'itself_dob_diff_min', 'itself_dob_diff_max', 'itself_dob_diff_mean', 'linked_dob_diff_min', 'linked_dob_diff_max', 'linked_dob_diff_mean', 'itself_year_diff_min', 'itself_year_diff_max', 'itself_year_diff_mean', 'linked_year_diff_min', 'linked_year_diff_max', 'linked_year_diff_mean']\n        - impute_categorical: 'unknown'\n        - impute_numerical: -999\n    Outputs:\n        - cleaned_data_path: './PEP_PS/model_w25/col_names_25.5_pep.pk'\n        - encoding_dict_path: './PEP_PS/model_w25/enc_dic_splitcase_25.5_pep.pk'\n        - numerical_mean_std_path: './PEP_PS/model_w25/num_mean_std_splitcase_25.5_pep.pk'\n        - categorical_embedding_sizes_path: './PEP_PS/model_w25/categorical_embedding_sizes_splitcase_25.5_pep.pk'\n        - train_test_split_path: './PEP_PS/model_w25/dev_splitcase_25.5_pep.pk'\n\nModel Training:\n    Inputs:\n        - learning_rate: 1e-4 to 1e-2 (loguniform)\n        - weight_decay: 1e-5 to 1e-2 (loguniform)\n        - dropout: 0.1 to 0.5 (float)\n        - num_units: 40 to 120 (int)\n        - batch_size: 50 to 500 (int)\n        - num_layers: 2 to 4 (int)\n        - epochs: 100\n        - model_save_path: './PEP_PS/model_w25/hptuning/'\n        - model_tag: '25.5_pepht'\n        - train_data: train_ds_buddle\n        - validation_data: test_ds_buddle\n        - early_stop_tolerance: 20\n    Outputs:\n        - best_model_path: './PEP_PS/model_w25/hptuning/{}_{}.bin'.format(model_tag, current_time)\n        - study_log_path: '/home/chaoychen/PEP_PS/model_w25/hptuning/study_log.txt'\n        - study_save_path: '/home/chaoychen/PEP_PS/model_w25/hptuning/{}.pk'.format(studyname)\n```",
    "```yaml\nData Preprocessing:\n    Inputs:\n        - dataset_path: './PEP_PS/dataset/clean_all_var_v10.pk'\n        - filter_discipline_id: 1001\n        - filter_time_created: '2021-07-31 23:59:59'\n        - auto_rfi_label: 'Auto-RFI'\n        - ds_final_state_path: '/apps/risk/qpull/out/chaoychen_1660156696_tdmovetpt_fexp.csv'\n        - ds_final_state_sep: '\\x07'\n        - ds_final_state_filter_label: 'RFI'\n        - ds_final_state_filter_final_step: 'Man-Dis'\n        - meta_columns: ['tid', 'entity_reference_id', 'time_created', 'new_logic_label', 'new_logic_label_v2', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_uid', 'label_with_autorfi', 'pit_context', 'txn_grph_linked_account_list']\n        - tag_column: 'new_logic_label'\n        - rev_cat_columns: ['case_identifier', 's_nm', 's_first_nm', 's_middle_nm', 's_last_nm', 's_bus_nm', 's_trade_nm', 'dt', 'scenario_name', 'seg_reason', 's_cntry', 'customer_dob_available']\n        - cat_2_num_columns: ['length_s_trade_nm', 's_gibscore_name', 's_cust_name_profanity', 's_busn_name_profanity', 's_trade_name_profanity']\n        - high_missing_threshold: 98\n        - dev_time_split: '2022-03-31 23:59:59'\n        - oot_time_split: '2022-04-01 00:00:00'\n        - star_dataset_path: './PEP_PS/STAR/pepps_PS_V9.csv'\n        - star_dataset_sep: ','\n        - star_psi_threshold: 0.1\n        - dob_var_columns: ['itself_dob_available_sum', 'linked_dob_available_sum', 'dob_match_sum', 'linked_dob_match_sum', 'year_match_sum', 'linked_year_match_sum', 'itself_dob_diff_min', 'itself_dob_diff_max', 'itself_dob_diff_mean', 'linked_dob_diff_min', 'linked_dob_diff_max', 'linked_dob_diff_mean', 'itself_year_diff_min', 'itself_year_diff_max', 'itself_year_diff_mean', 'linked_year_diff_min', 'linked_year_diff_max', 'linked_year_diff_mean']\n        - impute_cat_value: 'unknown'\n        - impute_num_value: -999\n        - train_test_split_ratio: 0.2\n        - train_test_split_random_state: 42\n    Outputs:\n        - cleaned_dataset_path: './PEP_PS/model_w26/col_names_26.2_ps.pk'\n        - encoding_dict_path: './PEP_PS/model_w26/enc_dic_splitcase_26.2_ps.pk'\n        - num_mean_std_path: './PEP_PS/model_w26/num_mean_std_splitcase_26.2_ps.pk'\n        - categorical_embedding_sizes_path: './PEP_PS/model_w26/categorical_embedding_sizes_splitcase_26.2_ps.pk'\n        - train_test_split_indices_path: './PEP_PS/model_w26/dev_splitcase_26.2_ps.pk'\n\nModel Training:\n    Inputs:\n        - learning_rate: 0.005\n        - weight_decay: 0.0002017676740751972\n        - dropout: 0.139544111255766\n        - num_units: 120\n        - batch_size: 191\n        - num_layers: 2\n        - epochs: 100\n        - model_save_path: './PEP_PS/model_w26/best_after_tuning/'\n        - model_tag: '26.2_ps'\n    Outputs:\n        - best_model_path: './PEP_PS/model_w26/best_after_tuning/{}_{}.bin'\n```",
    "```yaml\nModel Evaluation:\n    Inputs:\n        - features: [cat_col, num_col]\n        - cat_encoding: enc_dic\n        - num_norm: [dev_mean, dev_std]\n        - categorical_embedding_sizes: categorical_embedding_sizes\n        - model_path: './PEP_PS/model_{}/best_after_tuning/{}_20220811_13_40.bin'\n        - nu: 50\n        - train_ds: train_ds\n        - val_ds: test_ds\n        - oot_ds: oot_ds\n    Outputs:\n        - dataset_processed: dataset_processed\n        - confusion_dict: confusion_dict\n        - case_eval_ds2: case_eval_ds2\n        - case_eval_ds_agg: case_eval_ds_agg\n```",
    "```yaml\nData Preprocessing:\n    Inputs:\n        - dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'\n        - filter_condition: \"(all_dataset['discipline_id']==1002) & (all_dataset['time_created']>'2022-02-15 23:59:59')\"\n        - column_names_path: \"./PEP_PS/model_w25/col_names_25.5_pep.pk\"\n        - meta_columns: ['tid', 'discipline_id', 'entity_reference_id', 'time_created', 'new_logic_label', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_type', 'entity_uid', 'pit_context']\n        - tag_column: 'new_logic_label'\n        - tag_mt: ['tag_esc', 'tag_rfi', 'tag_em']\n        - split_date: '2022-05-31 23:59:59'\n    Outputs:\n        - dev_dataset_path: './PEP_PS/model_w27/dev_ds_lgbm.pk'\n        - oot_dataset_path: './PEP_PS/model_w27/oot_ds_lgbm.pk'\n\nModel Training:\n    Inputs:\n        - case_auto_rfi_path: '/home/chaoychen/shared_data/data/keyuchen/pep_ps_scm_hits_driver_v2.pkl'\n        - test_size: 0.2\n        - random_state: 42\n        - lgbm_params: \n            task: 'train'\n            boosting_type: 'gbdt'\n            objective: 'binary'\n            metric: 'auc'\n            is_unbalance: True\n            learning_rate: 0.005\n            feature_fraction: 0.8\n            bagging_fraction: 0.8\n            bagging_freq: -1\n            verbose: 50\n            max_depth: 6\n            num_leaves: 22\n            max_bin: 18\n            min_sum_hessian_in_leaf: 240.89066194627077\n            num_threads: 10\n            n_estimators: 400\n        - discipline_ids: ['1002']\n    Outputs:\n        - model_save_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'\n\nModel Evaluation:\n    Inputs:\n        - discipline_ids: ['1001', '1002']\n        - tag_mt: ['tag_esc', 'tag_rfi', 'tag_em']\n        - model_load_path: '/home/chaoychen/PEP_PS/model_w20/lgbm_{disp}_{_tag}.pk'\n    Outputs:\n        - feature_importance_path: './PEP_PS/Feature_imp/pepps_model_imp_v9.1.xlsx'\n```",
    "```yaml\nData Preprocessing:\n    Inputs:\n        - dataset_path: './PEP_PS/dataset/clean_all_var_v10.1.pk'\n        - filter_condition: \"(all_dataset['discipline_id']==1001) & (all_dataset['time_created']>'2021-08-01 00:00:00')\"\n        - column_names_path: './PEP_PS/model_w26/col_names_26.2_ps.pk'\n        - meta_columns: ['tid', 'discipline_id', 'entity_reference_id', 'time_created', 'new_logic_label', 'customer_id', 'alert_cust_id', 'ps_decision', 'ps_decision_reason', 'tag', 'entity_id', 'entity_type', 'entity_uid', 'pit_context']\n        - target_column: 'new_logic_label'\n        - additional_tags: ['tag_esc', 'tag_rfi', 'tag_em']\n        - date_split_condition: '2022-03-31 23:59:59'\n        - case_auto_rfi_path: '/home/chaoychen/shared_data/data/keyuchen/pep_ps_scm_hits_driver_v2.pkl'\n        - test_size: 0.2\n        - random_state: 42\n    Outputs:\n        - train_data_path: 'raw_train'\n        - test_data_path: 'raw_test'\n\nModel Training:\n    Inputs:\n        - model_params: {'task': 'train', 'boosting_type': 'gbdt', 'objective': 'binary', 'metric': 'auc', 'is_unbalance': True, 'learning_rate': 0.005, 'feature_fraction': 0.8, 'bagging_fraction': 0.8, 'bagging_freq': -1, 'verbose': 50, 'max_depth': 6, 'num_leaves': 22, 'max_bin': 18, 'min_sum_hessian_in_leaf': 240.89066194627077, 'num_threads': 10, 'n_estimators': 400}\n        - discipline_ids: ['1001']\n        - tags: ['tag_esc', 'tag_rfi', 'tag_em']\n        - train_data: 'sample_raw_train'\n        - test_data: 'sample_raw_test'\n        - categorical_features: 'cat_col'\n        - numerical_features: 'num_col'\n    Outputs:\n        - model_save_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'\n\nModel Evaluation:\n    Inputs:\n        - model_load_path: '/home/chaoychen/PEP_PS/model_w27_lgbm/lgbm_{disp}_{_tag}.pk'\n        - discipline_ids: ['1001', '1002']\n        - tags: ['tag_esc', 'tag_rfi', 'tag_em']\n    Outputs:\n        - feature_importance_save_path: './PEP_PS/Feature_imp/pepps_model_imp_v10.1.xlsx'\n```"
  ]
}