{
  "dag_yaml": "nodes:\n- Driver Creation:\n    file_name: rmr_agent/repos/bt-retry-v2/etl/01_etl.py\n    line_range: 1-1187\n    inputs:\n      strategy_type_list: '[''PAN'', ''NO_AVS'', ''NETWORK_TOKENIZATION'', ''ABU'']'\n      date_range_start: '2023-08-15'\n      date_range_end: '2025-01-02'\n      random_sampling_factor: '15'\n      train_downsampling_factor: '900'\n      validation_downsampling_factor_start: '900'\n      validation_downsampling_factor_end: '950'\n      oot_downsampling_factor: '950'\n    outputs:\n      train_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_3\n      validation_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_3\n      test_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3\n- Driver Creation 2:\n    file_name: rmr_agent/repos/bt-retry-v2/etl/02_bq_to_dataproc.py\n    line_range: 1-53\n    inputs:\n      train_source_table_name: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train\n      validation_source_table_name: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid\n      test_source_table_name: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test\n      temporary_gcs_bucket: pypl-bkt-rsh-row-std-gds-pacman\n    outputs:\n      train_target_gcs_path: gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_2\n      validation_target_gcs_path: gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_2\n      test_target_gcs_path: gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_2\n- Model Training:\n    file_name: rmr_agent/repos/bt-retry-v2/model-dev/train.py\n    line_range: 1-414\n    inputs:\n      train_parquet_path: /projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_train_3/\n      val_parquet_path: /projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_valid_3/\n      features_path: /projects/dnaomi/bt-retry-global-v2/metadata/v2_features.txt\n      target_column: retry_is_success\n    outputs:\n      model_artifact_path: /projects/dnaomi/bt-retry-global-v2/models/final/bt_retry_v2.txt\n      metric_values: '[''precision_at_95'', ''precision_at_99'', ''savings_at_95'',\n        ''savings_at_99'', ''partial_aucpr_geq90'']'\n- Model Evaluation:\n    file_name: rmr_agent/repos/bt-retry-v2/model-dev/evaluate.py\n    line_range: 1-443\n    inputs:\n      data_path: /projects/dnaomi/bt-retry-global-refresh/data/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3/\n      v1_features_path: /projects/dnaomi/bt-retry-global-refresh/metadata/features_original.txt\n      v1_model_path: /projects/dnaomi/bt-retry-global/models/lgbm/original_lgbm/original_model.txt\n      v2_features_path: /projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt\n      v2_model_path: /projects/dnaomi/bt-retry-global-refresh/models/final/bt_retry_v2.txt\n      target_column: retry_is_success\n      v2_score_threshold: '0.018447025070137058'\n    outputs:\n      v1_metrics: List of metrics calculated for V1 model\n      v2_metrics: List of metrics calculated for V2 model\n      valid_data_filtered_path: /projects/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv\n- Model Packaging:\n    file_name: rmr_agent/repos/bt-retry-v2/deployment/01_export_to_ume.py\n    line_range: 1-78\n    inputs:\n      model_file_path: /projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_small.txt\n      model_json_path: /projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json\n      ume_output_path: /projects/dnaomi/bt-retry-global-v2/models/ume/\n      model_name: bt_retry_v2\n      tree_nodes_only: 'False'\n      output_name: bt_retry_v2_score\n    outputs:\n      binary_spec: LightGBM model spec object\n      ume_model_path: /projects/dnaomi/bt-retry-global-v2/models/ume/bt_retry_v2.m\n      final_model_json_path: /projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json\n- Model Scoring:\n    file_name: rmr_agent/repos/bt-retry-v2/deployment/02_pyscoring_validation.py\n    line_range: 1-172\n    inputs:\n      model_directory_path: /home/dnaomi/bt-retry-global-refresh/models/ume/\n      model_name: bt_retry_v2\n      valid_sample_path: /home/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv\n      features_file_path: /projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt\n      model_file_path: /home/dnaomi/bt-retry-global-refresh/models/ume/ume/bt_retry_v2.m\n    outputs:\n      scored_data_path: /projects/dnaomi/bt-retry-global-refresh/deployment/cosmos_ai_valid_data.csv\n\nedges:\n- from: Driver Creation\n  to: Driver Creation 2\n  attributes:\n    train_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_3\n    validation_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_3\n    test_dataset_path: pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3\n- from: Driver Creation 2\n  to: Model Training\n  attributes:\n    train_target_gcs_path: gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_2\n    validation_target_gcs_path: gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_2\n- from: Model Training\n  to: Model Evaluation\n  attributes:\n    model_artifact_path: /projects/dnaomi/bt-retry-global-v2/models/final/bt_retry_v2.txt\n- from: Model Evaluation\n  to: Model Packaging\n  attributes:\n    valid_data_filtered_path: /projects/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv\n- from: Model Packaging\n  to: Model Scoring\n  attributes:\n    ume_model_path: /projects/dnaomi/bt-retry-global-v2/models/ume/bt_retry_v2.m\n    final_model_json_path: /projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json"
}