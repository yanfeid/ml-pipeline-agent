{
  "attribute_identification": [
    "```json\n{\n    \"Driver Creation\": {\n        \"inputs\": [\n            {\"name\": \"strategy_type\", \"value\": [\"PAN\", \"NO_AVS\", \"NETWORK_TOKENIZATION\", \"ABU\"]},\n            {\"name\": \"date_range\", \"value\": [\"2023-08-15\", \"2025-01-02\"]},\n            {\"name\": \"random_sampling_factor\", \"value\": \"abs(mod(farm_fingerprint(cast(retried_transaction_fk as string)), 1000)) < 15\"},\n            {\"name\": \"fx_conversion_rate\", \"value\": \"site_exchng_rate / 100\"},\n            {\"name\": \"train_downsampling_factor\", \"value\": \"abs(mod(farm_fingerprint(cast(retry_txn_id as string)), 1000)) < 900\"},\n            {\"name\": \"validation_downsampling_factor\", \"value\": \"abs(mod(farm_fingerprint(cast(retry_txn_id as string)), 1000)) >= 900 and abs(mod(farm_fingerprint(cast(retry_txn_id as string)), 1000)) < 950\"},\n            {\"name\": \"test_downsampling_factor\", \"value\": \"abs(mod(farm_fingerprint(cast(retry_txn_id as string)), 1000)) >= 950\"}\n        ],\n        \"outputs\": [\n            {\"name\": \"final_driver_table_train\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_3\"},\n            {\"name\": \"final_driver_table_validation\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_3\"},\n            {\"name\": \"final_driver_table_test\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3\"}\n        ],\n        \"needs_config_fill\": true\n    }\n}\n```\n",
    "```json\n{\n    \"Driver Creation\": {\n        \"inputs\": [\n            {\"name\": \"source_table_name_train\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train\"},\n            {\"name\": \"source_table_name_valid\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid\"},\n            {\"name\": \"source_table_name_test\", \"value\": \"pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test\"}\n        ],\n        \"outputs\": [\n            {\"name\": \"target_gcs_path_train\", \"value\": \"gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_2\"},\n            {\"name\": \"target_gcs_path_valid\", \"value\": \"gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_2\"},\n            {\"name\": \"target_gcs_path_test\", \"value\": \"gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_2\"}\n        ],\n        \"needs_config_fill\": false\n    }\n}\n```\n",
    "```json\n{\n    \"Model Training\": {\n        \"inputs\": [\n            {\"name\": \"train_parquet_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_train_3/\"},\n            {\"name\": \"val_parquet_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_valid_3/\"},\n            {\"name\": \"v2_features_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/metadata/v2_features.txt\"},\n            {\"name\": \"target_col\", \"value\": \"retry_is_success\"},\n            {\"name\": \"best_params\", \"value\": {\n                \"colsample_bytree\": 0.5837239684404587,\n                \"learning_rate\": 0.0598927112458938,\n                \"min_child_samples\": 61,\n                \"min_data_in_bin\": 25,\n                \"num_leaves\": 217,\n                \"num_trees\": 141,\n                \"n_estimators\": 141,\n                \"n_jobs\": 8,\n                \"reg_alpha\": 4.784258485091152e-08,\n                \"reg_lambda\": 0.0002699654851946926,\n                \"subsample\": 0.6899589770039457,\n                \"subsample_freq\": 5\n            }},\n            {\"name\": \"early_stopping_params\", \"value\": {\"stopping_rounds\": 10}},\n            {\"name\": \"early_stopping_metric\", \"value\": \"average_precision\"},\n            {\"name\": \"metric_functions\", \"value\": [\"precision_at_95\", \"precision_at_99\", \"savings_at_95\", \"savings_at_99\", \"partial_aucpr_geq90\"]},\n            {\"name\": \"metric_names\", \"value\": [\"precision_at_95\", \"precision_at_99\", \"savings_at_95\", \"savings_at_99\", \"partial_aucpr_geq90\"]},\n            {\"name\": \"objective_metric_name\", \"value\": \"partial_aucpr_geq90\"}\n        ],\n        \"outputs\": [\n            {\"name\": \"model_artifact_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/final/bt_retry_v2.txt\"},\n            {\"name\": \"metric_values\", \"value\": \"List of metric values calculated during evaluation\"}\n        ],\n        \"needs_config_fill\": false\n    }\n}\n```\n",
    "```json\n{\n    \"Model Evaluation\": {\n        \"inputs\": [\n            {\"name\": \"data_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/data/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3/\"},\n            {\"name\": \"v1_features_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/metadata/features_original.txt\"},\n            {\"name\": \"v1_model_path\", \"value\": \"/projects/dnaomi/bt-retry-global/models/lgbm/original_lgbm/original_model.txt\"},\n            {\"name\": \"v2_features_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt\"},\n            {\"name\": \"v2_model_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/models/final/bt_retry_v2.txt\"},\n            {\"name\": \"metric_functions\", \"value\": [\"precision_at_95\", \"precision_at_99\", \"precision_at_995\", \"savings_at_95\", \"savings_at_99\", \"savings_at_995\", \"partial_aucpr_geq90\"]},\n            {\"name\": \"metric_names\", \"value\": [\"precision_at_95\", \"precision_at_99\", \"precision_at_995\", \"savings_at_95\", \"savings_at_99\", \"savings_at_995\", \"partial_aucpr_geq90\"]},\n            {\"name\": \"target_col\", \"value\": \"retry_is_success\"}\n        ],\n        \"outputs\": [\n            {\"name\": \"v1_metrics\", \"value\": \"calculated metrics for V1 model\"},\n            {\"name\": \"v2_metrics\", \"value\": \"calculated metrics for V2 model\"},\n            {\"name\": \"valid_data_filtered_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv\"}\n        ],\n        \"needs_config_fill\": false\n    }\n}\n```\n",
    "```json\n{\n    \"Model Packaging\": {\n        \"inputs\": [\n            {\"name\": \"full_features_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/metadata/v2_features_final_2.txt\"},\n            {\"name\": \"model_file_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_small.txt\"},\n            {\"name\": \"model_name\", \"value\": \"bt_retry_v2\"},\n            {\"name\": \"path_to_json\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json\"},\n            {\"name\": \"output_name\", \"value\": \"bt_retry_v2_score\"},\n            {\"name\": \"output_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/ume/\"}\n        ],\n        \"outputs\": [\n            {\"name\": \"model_json_with_pd_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json\"},\n            {\"name\": \"binary_spec_output_path\", \"value\": \"/projects/dnaomi/bt-retry-global-v2/models/ume/\"}\n        ],\n        \"needs_config_fill\": false\n    }\n}\n```\n",
    "```json\n{\n    \"Model Evaluation\": {\n        \"inputs\": [\n            {\"name\": \"valid_sample_path\", \"value\": \"/home/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv\"},\n            {\"name\": \"model_dir\", \"value\": \"/home/dnaomi/bt-retry-global-refresh/models/ume/\"},\n            {\"name\": \"model_ume_name\", \"value\": \"bt_retry_v2\"},\n            {\"name\": \"model_file\", \"value\": \"/home/dnaomi/bt-retry-global-refresh/models/ume/ume/bt_retry_v2.m\"},\n            {\"name\": \"features_file_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt\"},\n            {\"name\": \"delta\", \"value\": 1e-6}\n        ],\n        \"outputs\": [\n            {\"name\": \"cosmos_ai_valid_data_path\", \"value\": \"/projects/dnaomi/bt-retry-global-refresh/deployment/cosmos_ai_valid_data.csv\"},\n            {\"name\": \"valid_mismatches\", \"value\": \"validate_model(model_file, VALID_SAMPLE_PATH, 'v2_score', delta=1e-6)\"}\n        ],\n        \"needs_config_fill\": false\n    }\n}\n```\n"
  ]
}