{
  "attribute_parsing": [
    {
      "Driver Creation": {
        "inputs": [
          {
            "name": "strategy_type",
            "value": "['PAN', 'NO_AVS', 'NETWORK_TOKENIZATION', 'ABU']"
          },
          {
            "name": "created_at_start",
            "value": "'2023-08-15'"
          },
          {
            "name": "created_at_end",
            "value": "'2025-01-02'"
          },
          {
            "name": "sampling_factor",
            "value": "15"
          },
          {
            "name": "date_range_start",
            "value": "'2023-01-01'"
          },
          {
            "name": "date_range_end",
            "value": "'2025-01-02'"
          },
          {
            "name": "currency_code",
            "value": "'USD'"
          },
          {
            "name": "train_downsampling_factor",
            "value": "900"
          },
          {
            "name": "validation_downsampling_factor_start",
            "value": "900"
          },
          {
            "name": "validation_downsampling_factor_end",
            "value": "950"
          },
          {
            "name": "test_downsampling_factor",
            "value": "950"
          }
        ],
        "outputs": [
          {
            "name": "bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_3",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_3"
          },
          {
            "name": "bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_3",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_3"
          },
          {
            "name": "bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/etl/01_etl.py",
        "line_range": "1-1125"
      }
    },
    {
      "Driver Creation": {
        "inputs": [
          {
            "name": "source_table_name_train",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train"
          },
          {
            "name": "source_table_name_valid",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid"
          },
          {
            "name": "source_table_name_test",
            "value": "pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test"
          }
        ],
        "outputs": [
          {
            "name": "target_gcs_path_train",
            "value": "gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_train_2"
          },
          {
            "name": "target_gcs_path_valid",
            "value": "gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_valid_2"
          },
          {
            "name": "target_gcs_path_test",
            "value": "gs://pypl-bkt-rsh-row-std-gds-pacman/user/dnaomi/bt_retry_refresh/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_2"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/etl/02_bq_to_dataproc.py",
        "line_range": "1-40"
      }
    },
    {
      "Model Training": {
        "inputs": [
          {
            "name": "v1_features_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/metadata/v1_features.txt"
          },
          {
            "name": "v1_latest_features_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/metadata/v0_features_latest.txt"
          },
          {
            "name": "v2_features_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/metadata/v2_features.txt"
          },
          {
            "name": "train_parquet_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_train_3/"
          },
          {
            "name": "val_parquet_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/data/pypl-bods.gds_pacman_prod.bt_retry_global_v2_driverset_cc_renamed_radd_subset_filtered_full_valid_3/"
          },
          {
            "name": "early_stopping_params",
            "value": {
              "stopping_rounds": 10
            }
          },
          {
            "name": "early_stopping_metric",
            "value": "average_precision"
          },
          {
            "name": "metric_functions",
            "value": [
              "precision_at_95",
              "precision_at_99",
              "savings_at_95",
              "savings_at_99",
              "partial_aucpr_geq90"
            ]
          },
          {
            "name": "metric_names",
            "value": [
              "precision_at_95",
              "precision_at_99",
              "savings_at_95",
              "savings_at_99",
              "partial_aucpr_geq90"
            ]
          },
          {
            "name": "objective_metric_name",
            "value": "partial_aucpr_geq90"
          },
          {
            "name": "target_col",
            "value": "retry_is_success"
          },
          {
            "name": "best_params",
            "value": {
              "colsample_bytree": 0.5837239684404587,
              "learning_rate": 0.0598927112458938,
              "min_child_samples": 61,
              "min_data_in_bin": 25,
              "num_leaves": 217,
              "num_trees": 141,
              "n_estimators": 141,
              "n_jobs": 8,
              "reg_alpha": 4.784258485091152e-08,
              "reg_lambda": 0.0002699654851946926,
              "subsample": 0.6899589770039457,
              "subsample_freq": 5
            }
          },
          {
            "name": "tracking_url",
            "value": "https://mlflow.apps.cosmos-onprem.dp.lvs.paypalinc.com"
          },
          {
            "name": "experiment_name",
            "value": "bt_retry_global_v2_full_fts_strategy_subset_model_all_strat_valid_control"
          },
          {
            "name": "study_name",
            "value": "bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control"
          },
          {
            "name": "studies_dir",
            "value": "../reports/studies/"
          },
          {
            "name": "n_trials",
            "value": 250
          }
        ],
        "outputs": [
          {
            "name": "model_artifact_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/models/final/bt_retry_v2.txt"
          },
          {
            "name": "metric_values",
            "value": "evaluated metrics"
          },
          {
            "name": "feature_importance",
            "value": "sorted feature importance"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/model-dev/train.py",
        "line_range": "1-299"
      },
      "Hyperparameter Tuning": {
        "inputs": [
          {
            "name": "tracking_url",
            "value": "https://mlflow.apps.cosmos-onprem.dp.lvs.paypalinc.com"
          },
          {
            "name": "experiment_name",
            "value": "bt_retry_global_v2_full_fts_strategy_subset_model_all_strat_valid_control"
          },
          {
            "name": "study_name",
            "value": "bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control"
          },
          {
            "name": "studies_dir",
            "value": "../reports/studies/"
          },
          {
            "name": "n_trials",
            "value": 250
          },
          {
            "name": "objective_metric_name",
            "value": "partial_aucpr_geq90"
          },
          {
            "name": "optuna_study_path",
            "value": "../reports/studies/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control.pkl"
          },
          {
            "name": "stdout_path",
            "value": "../reports/studies/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control-stdout.txt"
          },
          {
            "name": "stderr_path",
            "value": "../reports/studies/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control/bt-retry-global-v1-full-fts-strategy-subset-model-all-strat-valid-control-stdout.txt"
          }
        ],
        "outputs": [
          {
            "name": "study",
            "value": "optuna.study.Study"
          },
          {
            "name": "metrics",
            "value": "metrics[objective_metric_name]"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/model-dev/train.py",
        "line_range": "300-367"
      }
    },
    {
      "Model Evaluation": {
        "inputs": [
          {
            "name": "data_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/data/pypl-bods.gds_pacman_prod.bt_retry_global_refresh_driverset_cc_renamed_radd_subset_filtered_full_test_3/"
          },
          {
            "name": "v1_features_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/metadata/features_original.txt"
          },
          {
            "name": "v1_model_path",
            "value": "/projects/dnaomi/bt-retry-global/models/lgbm/original_lgbm/original_model.txt"
          },
          {
            "name": "v2_features_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt"
          },
          {
            "name": "v2_model_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/models/final/bt_retry_v2.txt"
          },
          {
            "name": "target_col",
            "value": "retry_is_success"
          },
          {
            "name": "metric_functions",
            "value": [
              "precision_at_95",
              "precision_at_99",
              "precision_at_995",
              "savings_at_95",
              "savings_at_99",
              "savings_at_995",
              "partial_aucpr_geq90"
            ]
          },
          {
            "name": "metric_names",
            "value": [
              "precision_at_95",
              "precision_at_99",
              "precision_at_995",
              "savings_at_95",
              "savings_at_99",
              "savings_at_995",
              "partial_aucpr_geq90"
            ]
          }
        ],
        "outputs": [
          {
            "name": "v1_metrics",
            "value": "calculated metrics for V1 model"
          },
          {
            "name": "v2_metrics",
            "value": "calculated metrics for V2 model"
          },
          {
            "name": "valid_data_filtered_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/model-dev/evaluate.py",
        "line_range": "1-383"
      }
    },
    {
      "Model Packaging": {
        "inputs": [
          {
            "name": "full_features_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/metadata/v2_features_final_2.txt"
          },
          {
            "name": "model_file_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_small.txt"
          },
          {
            "name": "path_to_json",
            "value": "/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json"
          }
        ],
        "outputs": [
          {
            "name": "model_json_with_pd_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/models/bt_retry_v2_model_idi.json"
          },
          {
            "name": "output_path",
            "value": "/projects/dnaomi/bt-retry-global-v2/models/ume/"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/deployment/01_export_to_ume.py",
        "line_range": "1-60"
      }
    },
    {
      "Model Scoring": {
        "inputs": [
          {
            "name": "models_dir",
            "value": "/home/dnaomi/bt-retry-global-refresh/models/ume/"
          },
          {
            "name": "model_ume_name",
            "value": "bt_retry_v2"
          },
          {
            "name": "valid_sample_path",
            "value": "/home/dnaomi/bt-retry-global-refresh/deployment/valid_data_filtered_final.csv"
          },
          {
            "name": "features_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/metadata/v2_features_final_2.txt"
          }
        ],
        "outputs": [
          {
            "name": "scored_data_path",
            "value": "/projects/dnaomi/bt-retry-global-refresh/deployment/cosmos_ai_valid_data.csv"
          }
        ],
        "file_name": "rmr_agent/repos/bt-retry-v2/deployment/02_pyscoring_validation.py",
        "line_range": "1-140"
      }
    }
  ]
}