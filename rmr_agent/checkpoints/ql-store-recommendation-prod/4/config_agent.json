{
  "config": {
    "environment_ini": "[general]\nrefresh_date = 2023-10-05\nuser = chenzhao\nenvironment = \nmo_name = value_from_config\ndriver_dataset = \ndataproc_project_name = ccg24-hrzana-gds-pacman\ndataproc_storage_bucket = pypl-bkt-rsh-row-std-gds-pacman\nlocal_output_base_path = /projects/gds-packman/apps/ql-store-recommendation-prod/research\ngcs_base_path = gs://${general:dataproc_storage_bucket}/user/${general:user}/prod/ql-store-rmr\nqueue_name = default\nnamespace = gds-packman",
    "solution_ini": "[general]\nmodel_name = RMR_MODEL_ID\ncheck_point = \nemail_to = ${general:user}\nstate_file = \ncosmos_project = ${general:user}\ngcp_app_id = \n\n[driver_creation]\nfile_path = ../config/base_config.yaml\nbq_prefix = ${general:dataproc_project_name}.${general:driver_dataset}\ntraining_exclude_merch = config['driver_config']['training_exclude_merch']\ntrain_start_date = config['driver_config']['train_start_date']\noot_start_date = config['driver_config']['oot_start_date']\nval_start_date = config['driver_config']['val_start_date']\ntraining_hot_positive_attributed_txn_sampling_alpha = config['driver_config']['training_hot_positive_attributed_txn_sampling_alpha']\ntraining_attributed_txn_upsampling_rate = config['driver_config']['training_attributed_txn_upsampling_rate']\nremoving_highly_active_user_threshold = config['driver_config']['removing_highly_active_user_threshold']\nremoving_highly_active_user_merchant_threshold = config['driver_config']['removing_highly_active_user_merchant_threshold']\nremoving_highly_active_user_merchant_date_threshold = config['driver_config']['removing_highly_active_user_merchant_date_threshold']\ntraining_hot_positive_organic_txn_sampling_alpha = config['driver_config']['training_hot_positive_organic_txn_sampling_alpha']\nsave_label_mixing_rate = config['driver_config']['save_label_mixing_rate']\nratio_for_hard_negtive = config['driver_config']['ratio_for_hard_negtive']\nhard_negative_impression_time_window = config['driver_config']['hard_negative_impression_time_window']\nnegative_sampling_avoid_delay_postive_feedback_window = config['driver_config']['negative_sampling_avoid_delay_postive_feedback_window']\ntraining_hot_negative_sampling_alpha = config['driver_config']['training_hot_negative_sampling_alpha']\nuniform_negative_postive_ratio = config['driver_config']['uniform_negative_postive_ratio']\nfinal_driver_table = ${general:gcs_base_path}/data/ql_store_rmr_driver_simu_consumer\n\n[feature_engineering]\ndriver_simu_txn_365d = ${general:dataproc_project_name}.${general:driver_dataset}driver_simu_txn_365d\ndriver_simu_txn_365d_agg = ${general:dataproc_project_name}.${general:driver_dataset}driver_simu_txn_365d_agg\ndriver_consumer_base = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base\ndriver_consumer_base_txn_5k_merch_category = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_txn_5k_merch_category\ndriver_consumer_base_last_10_txn = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_last_10_txn\ndriver_consumer_base_all_history_array_0 = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_all_history_array_0\ndriver_consumer_base_all_history_array = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_all_history_array\ndriver_combine_category = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category\ndriver_combine_category_agg_0 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_0\ndriver_combine_category_agg_1 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_1\ndriver_combine_category_agg_2 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_2\ndriver_combine_category_agg_3 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_3\ndriver_combine_category_agg_4 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_4\ndriver_combine_category_agg_5 = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_5\ndriver_merchant_base = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base\ndriver_merchant_base_txn_30d = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_txn_30d\ndriver_merchant_base_txn_30d_filter_sndr = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_txn_30d_filter_sndr\ndriver_merchant_base_price_agg = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_price_agg\ndriver_merchant_base_sales_agg = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_sales_agg\ndriver_elig_save_365d_category = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_365d_category\ndriver_elig_save_agg_00 = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_00\ndriver_elig_save_agg_0 = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_0\ndriver_elig_save_agg_1 = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_1\ndriver_elig_save_agg_2 = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_2\ndriver_elig_save_agg_3 = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_3\ndriver_merchant_base_click_save = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_click_save\ndriver_consumer_base_gender = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_gender\n\n[data_pulling]\nstage = training\nseq_num = 20231005\nis_prod = True\njob_name = ql_store_rmr\ngroup_name = mls_gads\nmodel_name = ql_store_rmr_datafetcher\nmodel_owner = ${general:user}\ndescription = ranking_combined_datafetcher\nmanager = Farhad\non_gcp = True\ngcp_project_id = ${general:dataproc_project_name}\ngcs_bucket_name = ${general:dataproc_storage_bucket}\nbq_materialization_project = pypl-bods\nbq_materialization_dataset = rsh_row_gds_pacman\ndriver_loc = ${general:gcs_base_path}/data/ql_store_rmr_driver_simu_consumer\nvariables = [\"prmry_addr_state\", \"days_on_file\", \"ebay_member_y_n\", \"consu_engagmnt_seg_key\", \"prmry_cc_type_code\", \"days_appweb_visit\", \"consu_age_band_key\", \"consu_income_band_key\", \"consu_dmgrphc_seg_key\"]\nsplit_ratio = {\"train\": 1.0}\nnum_of_splits = 1\ndata_loc = ${general:gcs_base_path}/data/ql_store_rmr_driver_simu_consumer_varmart\n\n[feature_consolidation]\nconfig_file_path = ../config/base_config.yaml\nbq_project_dataset_prefix = ${general:dataproc_project_name}.${general:driver_dataset}\ndriver_dev_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_dev\ndriver_simu_txn_365d_agg_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_simu_txn_365d_agg\ndriver_consumer_base_last_10_txn_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_last_10_txn\ndriver_consumer_base_all_history_array_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_all_history_array\ndriver_combine_category_agg_3_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_3\ndriver_combine_category_agg_5_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_combine_category_agg_5\ndriver_merchant_base_price_agg_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_price_agg\ndriver_merchant_base_sales_agg_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_sales_agg\ndriver_elig_save_agg_00_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_00\ndriver_elig_save_agg_0_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_0\ndriver_elig_save_agg_3_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_elig_save_agg_3\ndriver_merchant_base_click_save_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_merchant_base_click_save\ndriver_consumer_base_gender_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_consumer_base_gender\nql_store_honey_merch_quality_scores_external_table = pypl-bods.gds_pacman_prod.ql_store_honey_merch_quality_scores_external\ndriver_simu_consumer_varmart_external_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_simu_consumer_varmart_external\nstore_recommendation_kg_embedding_32_v2_table = pypl-bods.gds_pacman_prod.store_recommendation_kg_embedding_32_v2\ndriver_dev_features_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_dev_features\ndriver_oot_features_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_features\ndriver_oot_features_expand_seq_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_features_expand_seq\nexport_data_uri = ${general:gcs_base_path}/data/ql_store_rmr_driver_dev_features/part*.parquet\n\n[data_preprocessing]\ndirectory = ../data/ql_store_rmr_driver_dev_features\nparquet_files = [list of parquet files in the directory]\nstate_to_abbreviation = { 'ALABAMA': 'AL', 'ALASKA': 'AK', ... }\ncategorical_features = ['sndr_consu_engagmnt_seg_key', 'sndr_ebay_member_y_n', 'gender', 'sndr_prmry_cc_type_code', 'sndr_consu_age_band_key', 'sndr_consu_dmgrphc_seg_key']\nnumeric_features = [\"sndr_rcvr_txn_num_30d\", \"sndr_rcvr_txn_num_180d\", \"sndr_rcvr_txn_num_365d\", \"sndr_rcvr_txn_amt_30d\", \"sndr_rcvr_txn_amt_180d\", ...]\nsequence_features = ['sndr_most_recent_100_merch_category', 'sndr_most_recent_100_merch_list']\ntokenizer_params = { 'num_words': 1000, 'oov_token': '<OOV>' }\nchunk_size = 1000000\nmodel_version_base = ../artifacts/din_<today_date>\nexported_feature_transformer = ../artifacts/din_<today_date>/exported_feature_transformer\noutput_dir = ../data/ql_store_rmr_driver_dev_features_transformed\nrcvr_id_tokenizer_path = ../artifacts/din_<today_date>/exported_feature_transformer/rcvr_id_tokenizer\ncategorical_feature_encoders_path = ../artifacts/din_<today_date>/exported_feature_transformer/categorical_feature_encoders\nnumerical_feature_scalars_path = ../artifacts/din_<today_date>/exported_feature_transformer/numerical_feature_scalars\n\n[model_training]\nmodel_version_file = ../_current_model_version\ndata_directory = ../data/ql_store_rmr_driver_dev_features_transformed\nnumeric_names = [\"sndr_rcvr_txn_num_30d\", \"sndr_rcvr_txn_num_180d\", ...]\nrcvr_id_names = [\"rcvr_id\"]\ngpt_cate_names = [\"gpt_1st_category_l2_index\", \"sndr_1st_freq_merchant_category_30d\", ...]\nbatch_size = config['training_config']['DIN']['batch_size']\nlearning_rate = config['training_config']['DIN']['learning_rate']\ndnn_use_bn = config['training_config']['DIN']['dnn_use_bn']\ndnn_hidden_units = config['training_config']['DIN']['dnn_hidden_units']\ndnn_activation = config['training_config']['DIN']['dnn_activation']\natt_hidden_size = config['training_config']['DIN']['att_hidden_size']\natt_activation = config['training_config']['DIN']['att_activation']\natt_weight_normalization = config['training_config']['DIN']['att_weight_normalization']\nl2_reg_dnn = config['training_config']['DIN']['l2_reg_dnn']\nl2_reg_embedding = config['training_config']['DIN']['l2_reg_embedding']\ndnn_dropout = config['training_config']['DIN']['dnn_dropout']\nseed = config['training_config']['DIN']['seed']\nepochs = config['training_config']['DIN']['epochs']\nmodel_version_base = ../artifacts/{model_version}/19\nexported_feature_transformer = ../artifacts/{model_version}/exported_feature_transformer\nexported_model_base = ../artifacts/{model_version}/19/exported_models\nh5_model_path = ../artifacts/{model_version}/19/exported_models/din.h5\ntf_model_path = ../artifacts/{model_version}/19/exported_models/din_saved_model\n\n[model_packaging]\ncategorical_feature_encoders = ../artifacts/{model_version}/exported_feature_transformer/categorical_feature_encoders\nnumerical_feature_scalars = ../artifacts/{model_version}/exported_feature_transformer/numerical_feature_scalars\nonnx_spec_path = ../artifacts/{model_version}/19/exported_models\noot_scoring_directory = ../artifacts/{model_version}/19/exported_models/oot_scoring\nonnx_model_path = ../artifacts/{model_version}/19/exported_models/tf_2_onnx_model.m\nrenamed_onnx_model_path = ../artifacts/{model_version}/19/exported_models/oot_scoring/din_expand_seq.m\nprod_model_path = ../artifacts/{model_version}/19/exported_models/din_prod.m\ntest_data_json_path = ./testdata/testdata.json\nonnx_output_path = ../artifacts/{model_version}/19/exported_models/din.onnx\n\n[model_scoring]\nworking_path = ${general:local_output_base_path}\nparams_path = ${general:local_output_base_path}/config\nsection_name = oot_data_scoring\nmodel_version_path = ${general:local_output_base_path}/_current_model_version\nexported_model_base = ${general:local_output_base_path}/artifacts/{model_version}/exported_models\nm_local_folder = ${general:local_output_base_path}/artifacts/din_20240708/18/exported_models/oot_scoring\nm_gcp_folder = ${general:gcs_base_path}/challenger/oot_scoring\noot_data_path = ${general:gcs_base_path}/data/ql_store_rmr_oot_transformed\neval_path = ${general:gcs_base_path}/data/ql_store_rmr_oot_transformed_scored\nmo_name = ${general:mo_name}\ngcp_project = ${general:mo_name}\ndataproc_config = ${general:mo_name}\neval_result_path = ${general:gcs_base_path}/data/ql_store_rmr_oot_transformed_scored\nlog_file = ${general:local_output_base_path}/logs/{job_id}.log\nbigquery_table_uri = ${general:gcs_base_path}/data/ql_store_rmr_oot_transformed_scored/part*\n\n[model_version_loading]\nmodel_version_path = ../_current_model_version\nmodel_version_base = ../artifacts/{model_version}/18\nexported_eval_readout_base = ../artifacts/{model_version}/18/exported_eval_readouts\n\n[configuration_loading]\n\n[bigquery_table_creation]\ndriver_oot_txn_365d_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_txn_365d\ndriver_oot_txn_save_365d_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_txn_save_365d\nmlv2_gpt_similar_map_snapshot_table = ${general:dataproc_project_name}.${general:driver_dataset}mlv2_gpt_similar_map_snapshot\nmlv2_gpt_similar_map_snapshot_1_table = ${general:dataproc_project_name}.${general:driver_dataset}mlv2_gpt_similar_map_snapshot_1\ndriver_oot_txn_save_365d_similar_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_txn_save_365d_similar\ndriver_oot_txn_save_365d_similar_dedup_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_txn_save_365d_similar_dedup\ndriver_oot_two_tower_similar_score_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_two_tower_similar_score\ndriver_oot_hueristic_model_comparison_table = ${general:dataproc_project_name}.${general:driver_dataset}driver_oot_hueristic_model_comparison\n\n[performance_evaluation]\nremove_list = '1365556366671835703','2254348706417584521','1581565211190403045','1157330454984142772','1339933886421356550','1812170125034785903','6053464759929799123','1587111025150613712','1672368731209095395','1365556366671835703','6085552794250364378','1954349237309389875'\nperformance_all_csv = ../artifacts/{model_version}/18/exported_eval_readouts/performane_all.csv\nperformance_all_png = ../artifacts/{model_version}/18/exported_eval_readouts/performane_all.png\nperformance_ftu_csv = ../artifacts/{model_version}/18/exported_eval_readouts/performane_ftu.csv\nperformance_ftu_png = ../artifacts/{model_version}/18/exported_eval_readouts"
  }
}